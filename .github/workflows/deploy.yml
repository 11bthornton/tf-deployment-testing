name: Deploy

on:
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  deploy-dev:
    name: 'Dev'
    uses: ./.github/workflows/dev.template.yml

  deploy-uat:
    if: github.ref_name == 'main'
    name: 'UAT'
    needs: deploy-dev
    uses: ./.github/workflows/uat.template.yml
  
  deploy-prod:
    if: github.ref_name == 'main'
    name: 'Prod'
    needs: [deploy-dev, deploy-uat]
    uses: ./.github/workflows/prod.template.yml

    