name: Plan Only - Terraform

on:
  pull_request:
    paths:
      - 'infrastructure/**'
    branches:
      - main
  workflow_dispatch:

jobs:
  plan:
    uses: ./.github/workflows/terraform-plan.yml
    with:
      working-directory: infrastructure
      environment: production
    secrets:
      credentials: ${{ secrets.AZURE_CREDENTIALS }}
